{% extends "base.html" %}

{% block title %}Ficha del Paciente | TerraVerde{% endblock %}
{% block topbar_title %}Ficha del Paciente{% endblock %}

{% block content %}
<div class="main-wrap" style="display:flex; gap:24px;">
  <nav class="sidebar" id="sidebar">
    <h3>Módulos</h3>
    <a href="{% url 'pacientes:create' %}">Registrar Paciente</a>
    <a href="{% url 'pacientes:list' %}">Listado de Pacientes</a>
    <a href="{% url 'home' %}">Volver al Inicio</a>
  </nav>

  <section class="contenido-principal" style="flex:1; max-width:900px;">
    <h1 class="main-title">{{ object.apellido }}, {{ object.nombre }}</h1>

    <div class="card" style="background:#fff; border:1px solid #e7ebef; border-radius:12px; padding:18px;">
      <p><strong>DNI:</strong> {{ object.dni }}</p>
      <p><strong>Fecha de Nacimiento:</strong> {{ object.fecha_nacimiento|date:"Y-m-d" }}</p>
      <p><strong>Teléfono:</strong> {{ object.telefono }}</p>
      <p><strong>Dirección:</strong> {{ object.direccion }}</p>
      <p><strong>Nacionalidad:</strong> {{ object.nacionalidad }}</p>

      {% if object.tiene_representante %}
        <hr>
        <h3>Representante Legal</h3>
        <p><strong>Nombre:</strong> {{ object.rep_nombre }} {{ object.rep_apellido }}</p>
        <p><strong>Edad:</strong> {{ object.rep_edad }}</p>
        <p><strong>Teléfono:</strong> {{ object.rep_telefono }}</p>
        <p><strong>Nacionalidad:</strong> {{ object.rep_nacionalidad }}</p>
      {% endif %}
    </div>

    <div style="margin-top:16px; display:flex; gap:8px;">
      <a class="btn btn-editar" href="{% url 'pacientes:update' object.id %}">Editar</a>
      <form method="post" action="{% url 'pacientes:delete' object.id %}">
        {% csrf_token %}
        <button class="btn btn-eliminar" onclick="return confirm('¿Eliminar este paciente?')">Eliminar</button>
      </form>
      <a class="btn btn-regresar" href="{% url 'pacientes:list' %}">Volver</a>
    </div>
  </section>
</div>
{% endblock %}
