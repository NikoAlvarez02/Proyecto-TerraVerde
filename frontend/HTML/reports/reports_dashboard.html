{% extends 'base.html' %}{% load static %}{% block title %}Reportes | TerraVerde{% endblock %}{% block topbar_title %}Página de Reportes{% endblock %}{% block extra_css %}  <link rel="stylesheet" href="{% static 'CSS/reports.css' %}">{% endblock %}{% block content %}  <div class="rp-page">    <section class="card">      <div class="rp-actions">        <button class="btn btn-primary" onclick="location.href='{% url 'reportes:viewer' %}'">Generar Nuevo Reporte</button>      </div>    </section>    <section class="card">      <h3 class="rp-subtitle">Reportes Esenciales</h3>      <div style="display:grid; gap:12px; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));">        <div class="card" style="padding:14px;">          <h4 style="margin:0 0 6px;">Gestión de Turnos y Asistencia</h4>          <ul class="rp-list">            <li>Control de ausentismo</li>            <li>Ocupación de agenda</li>            <li>Horarios pico</li>            <li>Desempeño por profesional</li>          </ul>          <div class="rp-actions" style="margin-top:10px;">            <a class="btn btn-primary" href="{% url 'reportes:viewer' %}?est=atenciones">Ver/Exportar</a>          </div>        </div>        <div class="card" style="padding:14px;">          <h4 style="margin:0 0 6px;">Productividad por Profesional</h4>          <ul class="rp-list">            <li>Cantidad de atenciones por profesional</li>            <li>Horas productivas</li>            <li>Tasa de Ocupación</li>            <li>Ranking mensual</li>            <li>Distribución por tipo de consulta</li>            <li>Evolución temporal</li>            <li>Productividad por día de la semana</li>          </ul>          <div class="rp-actions" style="margin-top:10px;">            <a class="btn btn-primary" href="{% url 'reportes:viewer' %}?est=productividad">Ver/Exportar</a>          </div>        </div>        <div class="card" style="padding:14px;">          <h4 style="margin:0 0 6px;">Pacientes y Seguimiento Clínico</h4>          <ul class="rp-list">            <li>Pacientes activos/inactivos</li>            <li>Distribución por diagnóstico</li>            <li>Pacientes sin seguimiento reciente</li>            <li>Evolución mensual</li>          </ul>          <div class="rp-actions" style="margin-top:10px;">            <a class="btn btn-primary" href="{% url 'reportes:viewer' %}?est=diagnosticos">Ver/Exportar</a>          </div>        </div>      </div>    </section>    <section class="card">      <h3 class="rp-subtitle">Reportes recientes</h3>      <ul id="recent-list" class="rp-list"></ul>    </section>  </div>  <script>    fetch('/reportes/api/generados/?page_size=10', {credentials:'include'})      .then(r=>r.json()).then(d=>{        const ul = document.getElementById('recent-list');        (d.results||[]).forEach(it=>{          const url = it.archivo_url || it.archivo_pdf;          const li=document.createElement('li');          li.innerHTML = `<a href="${url}" target="_blank">${it.tipo} - ${new Date(it.fecha_generacion).toLocaleString()}</a>`;          ul.appendChild(li);        });      });  </script>{% endblock %}

